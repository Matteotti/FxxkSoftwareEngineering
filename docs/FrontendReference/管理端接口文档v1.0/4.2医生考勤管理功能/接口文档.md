# 接口文档-V1.0

## 相关接口：考勤管理功能

### 1 返回指定日期所有打卡列表接口

#### 1.1 基本信息

> 请求路径：/clockin/findbydate
>
> 请求方式：POST
>
> 接口描述：该接口用于获得指定日期所有打卡列表

#### 1.2 请求参数

```shell
date="2024-05-04"
# 上传Date格式的数据类型
```

#### 1.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称       | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ---------- | ------ | -------- | ------ | --------------------- | -------- |
| code       | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message    | string | 非必须   |        | 提示信息              |          |
| data       | object | 必须     |        | 返回的数据            |          |
| \|-total   | number | 必须     |        | 总记录数              |          |
| \|-items   | array  | 必须     |        | 数据列表              |          |
| \|-clno    | number | 必须     |        | 主键                  |          |
| \|-dono    | number | 必须     |        | 医生主键              |          |
| \|-time    | time   | 必须     |        | 打卡时间              |          |
| \|-type    | string | 必须     |        | 打卡类型              |          |
| \|-state   | string | 必须     |        | 打卡状态              |          |
| \|-explain | string | 必须     |        | 解释说明              |          |

响应数据样例：

```json
{
  "code": 0,
  "message": "操作成功",
  "data": {
    "total": 1,
    "items": [
      {
        "clno": 2,
        "dono": 1,
        "time": "2024-05-04 12:56:49",
        "type": "上班",
        "state": "按时",
        "explain": "无"
      }
    ]
  }
}
```

### 2 返回指定日期区间内的异常考勤列表接口

#### 2.1 基本信息

> 请求路径：/clockin/abnormal
>
> 请求方式：POST
>
> 接口描述：该接口用于获得指定日期区间内的异常考勤列表

#### 2.2 请求参数

```shell
start="2024-05-03"&end="2024-05-04"
# 上传Date格式的数据类型
```

#### 2.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称       | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ---------- | ------ | -------- | ------ | --------------------- | -------- |
| code       | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message    | string | 非必须   |        | 提示信息              |          |
| data       | object | 必须     |        | 返回的数据            |          |
| \|-total   | number | 必须     |        | 总记录数              |          |
| \|-items   | array  | 必须     |        | 数据列表              |          |
| \|-clno    | number | 必须     |        | 主键                  |          |
| \|-dono    | number | 必须     |        | 医生主键              |          |
| \|-time    | time   | 必须     |        | 打卡时间              |          |
| \|-type    | string | 必须     |        | 打卡类型              |          |
| \|-state   | string | 必须     |        | 打卡状态              |          |
| \|-explain | string | 必须     |        | 解释说明              |          |

响应数据样例：

```json
{
  "code": 0,
  "message": "操作成功",
  "data": {
    "total": 1,
    "items": [
      {
        "clno": 1,
        "dono": 2,
        "time": "2024-05-03 08:01:32",
        "type": "上班",
        "state": "迟到",
        "explain": "路上堵车"
      }
    ]
  }
}
```

### 3 返回所有请假记录列表接口

#### 3.1 基本信息

> 请求路径：/leave/allinfor
>
> 请求方式：GET
>
> 接口描述：该接口返回所有请假记录列表

#### 3.2 请求参数

无，使用 jwt 令牌即可标识用户身份

#### 3.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称       | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ---------- | ------ | -------- | ------ | --------------------- | -------- |
| code       | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message    | string | 非必须   |        | 提示信息              |          |
| data       | object | 必须     |        | 返回的数据            |          |
| \|-total   | number | 必须     |        | 总记录数              |          |
| \|-items   | array  | 必须     |        | 数据列表              |          |
| \|-leno    | number | 必须     |        | 主键                  |          |
| \|-dono    | number | 必须     |        | 医生主键              |          |
| \|-start   | time   | 必须     |        | 开始时间              |          |
| \|-end     | time   | 必须     |        | 结束时间              |          |
| \|-type    | string | 必须     |        | 请假类型              |          |
| \|-explain | string | 必须     |        | 原因说明              |          |
| \|-state   | string | 必须     |        | 假条状态              |          |

响应数据样例：

```json
{
  "code": 0,
  "message": "操作成功",
  "data": {
    "total": 2,
    "items": [
      {
        "leno": 1,
        "dono": 2,
        "start": "2024-04-28 13:00:00",
        "end": "2024-04-28 17:00:00",
        "type": "事假",
        "explain": "家中急事",
        "state": "批准"
      },
      {
        "leno": 2,
        "dono": 1,
        "start": "2024-04-29 08:00:00",
        "end": "2024-04-29 12:00:00",
        "type": "病假",
        "explain": "感冒发烧",
        "state": "未批"
      }
    ]
  }
}
```

### 4 返回未处理请假记录列表接口

#### 4.1 基本信息

> 请求路径：/leave/undisposed
>
> 请求方式：GET
>
> 接口描述：该接口用于获得所有未处理请假记录列表

#### 4.2 请求参数

无，使用 jwt 令牌即可标识用户身份

#### 4.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称      | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| --------- | ------ | -------- | ------ | --------------------- | -------- |
| code      | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message   | string | 非必须   |        | 提示信息              |          |
| data      | object | 必须     |        | 返回的数据            |          |
| \|-total  | number | 必须     |        | 总记录数              |          |
| \|-items  | array  | 必须     |        | 数据列表              |          |
| \|-cono   | number | 必须     |        | 主键                  |          |
| \|-pano   | number | 必须     |        | 病人主键              |          |
| \|-dono   | number | 必须     |        | 医生主键              |          |
| \|-text   | string | 必须     |        | 投诉内容              |          |
| \|-state  | string | 必须     |        | 状态                  |          |
| \|-result | string | 必须     |        | 结果反馈              |          |
| \|-time   | time   | 必须     |        | 投诉日期              |          |

响应数据样例：

```json
{
  "code": 0,
  "message": "操作成功",
  "data": {
    "total": 1,
    "items": [
      {
        "leno": 2,
        "dono": 1,
        "start": "2024-04-29 08:00:00",
        "end": "2024-04-29 12:00:00",
        "type": "病假",
        "explain": "感冒发烧",
        "state": "未批"
      }
    ]
  }
}
```

### 5 处理待处理请假记录接口

#### 5.1 基本信息

> 请求路径：/leave/handle
>
> 请求方式：POST
>
> 接口描述：该接口用于处理待处理请假记录

#### 5.2 请求参数

```shell
leno=2&state="批准"
# state只有批准和不批两种情况
```

#### 5.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | null                  |          |

```json
{
  "code": 0,
  "message": "处理完成！",
  "data": null
}
```
